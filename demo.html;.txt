<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Webpack Example | Watson developer Cloud JS SDK </title>
  <style type=text/css>
    textarea {
      height: auto;
      min-height: 300px;
      width: 100%;
      max-width: 800px;
    }
  </style>
</head>
<body>
  <input type="file" id="fileinput" />
<h1>Browserify Example</h1>
<h2>Watson developer Cloud JS SDK</h2>

<p>This example connects directly from your browser to the Watson Tone Analyzer service (after fetching an auth token from the node.js server.)</p>

<p>Input text:</p>
<textarea id="input">Greetings from IBM Watson</textarea>

<p><button id="analyze-btn">Analyze</button></p>

<p>Result:</p>
<pre><code id="output"></code></pre>

<script src="/bundle.js"></script>
<script>
window.content = "HELLO WORLD HOW YOU DOING EVERYTHING IS ALRIGHT";
</script>
<script type="text/javascript">

  function readSingleFile(evt) {
    //Retrieve the first (and only!) File from the FileList object
    var f = evt.target.files[0]; 

    if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
	     var contents = e.target.result;
		 window.content = contents;
		 document.getElementById("input").value = window.content;
        console.log( "Got the file: \n" 
             
              + window.content
        );  
      }
      r.readAsText(f);
    } else { 
      alert("Failed to load file");
    }
  }

  document.getElementById('fileinput').addEventListener('change', readSingleFile, false);
</script>
</body>
</html>
